<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>å ºãƒ¬ãƒ¼ã‚·ãƒ³ã‚°å”ä¼š - è²·ã„ç›®ç™»éŒ²</title>
    <style>
        body { font-family: sans-serif; background: #e8f5e9; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 500px; margin-bottom: 20px; }
        h1, h2 { color: #2e7d32; margin-top: 0; }
        label { font-size: 0.9em; color: #666; }
        input, select, button { margin: 8px 0 16px 0; padding: 12px; width: 100%; box-sizing: border-box; border: 1px solid #ccc; border-radius: 6px; }
        button { background: #2e7d32; color: white; border: none; font-weight: bold; font-size: 1.1em; cursor: pointer; transition: 0.3s; }
        button:hover { background: #1b5e20; }
        .bet-item { border-bottom: 1px solid #eee; padding: 12px 0; }
        .bet-item:last-child { border-bottom: none; }
        .user-name { font-weight: bold; color: #333; }
        .bet-content { color: #d32f2f; font-weight: bold; margin-left: 10px; }
    </style>
</head>
<body>

    <div class="card">
        <h1>ğŸ‡ è²·ã„ç›®ç™»éŒ²</h1>
        <label>ãƒ¡ãƒ³ãƒãƒ¼</label>
        <select id="member" required>
            <option value="ä»Šå†…">ä»Šå†…</option>
            <option value="å°æ—">å°æ—</option>
            <option value="å‚äº•">å‚äº•</option>
            <option value="æ©‹æœ¬">æ©‹æœ¬</option>
            <option value="å±±æ‘">å±±æ‘</option>
        </select>
        <label>ãƒ¬ãƒ¼ã‚¹å</label>
        <input type="text" id="raceName" placeholder="ä¾‹ï¼šä¸­å±±11R æœ‰é¦¬è¨˜å¿µ">
        
        <label>è²·ã„ç›®ï¼ˆåˆ¸ç¨®ã¨ç•ªå·ï¼‰</label>
        <div style="display: flex; gap: 5px; margin-bottom: 5px;">
            <select id="type1" style="width: 35%; margin: 0;"><option>å˜å‹</option><option>è¤‡å‹</option><option>é¦¬é€£</option><option>ãƒ¯ã‚¤ãƒ‰</option><option>é¦¬å˜</option><option>3é€£è¤‡</option><option>3é€£å˜</option></select>
            <input type="text" id="bet1" placeholder="è²·ã„ç›® 1" style="width: 65%; margin: 0;" required>
        </div>
        <div style="display: flex; gap: 5px; margin-bottom: 5px;">
            <select id="type2" style="width: 35%; margin: 0;"><option>å˜å‹</option><option>è¤‡å‹</option><option>é¦¬é€£</option><option>ãƒ¯ã‚¤ãƒ‰</option><option>é¦¬å˜</option><option>3é€£è¤‡</option><option>3é€£å˜</option></select>
            <input type="text" id="bet2" placeholder="è²·ã„ç›® 2" style="width: 65%; margin: 0;">
        </div>
        <div style="display: flex; gap: 5px; margin-bottom: 5px;">
            <select id="type3" style="width: 35%; margin: 0;"><option>å˜å‹</option><option>è¤‡å‹</option><option>é¦¬é€£</option><option>ãƒ¯ã‚¤ãƒ‰</option><option>é¦¬å˜</option><option>3é€£è¤‡</option><option>3é€£å˜</option></select>
            <input type="text" id="bet3" placeholder="è²·ã„ç›® 3" style="width: 65%; margin: 0;">
        </div>
        <div style="display: flex; gap: 5px; margin-bottom: 5px;">
            <select id="type4" style="width: 35%; margin: 0;"><option>å˜å‹</option><option>è¤‡å‹</option><option>é¦¬é€£</option><option>ãƒ¯ã‚¤ãƒ‰</option><option>é¦¬å˜</option><option>3é€£è¤‡</option><option>3é€£å˜</option></select>
            <input type="text" id="bet4" placeholder="è²·ã„ç›® 4" style="width: 65%; margin: 0;">
        </div>
        <div style="display: flex; gap: 5px; margin-bottom: 5px;">
            <select id="type5" style="width: 35%; margin: 0;"><option>å˜å‹</option><option>è¤‡å‹</option><option>é¦¬é€£</option><option>ãƒ¯ã‚¤ãƒ‰</option><option>é¦¬å˜</option><option>3é€£è¤‡</option><option>3é€£å˜</option></select>
            <input type="text" id="bet5" placeholder="è²·ã„ç›® 5" style="width: 65%; margin: 0;">
        </div>
        
        <button id="submitBtn">ç™»éŒ²ã™ã‚‹ï¼</button>
    </div>

    <div class="card">
        <h2>ğŸ“Š ã¿ã‚“ãªã®äºˆæƒ³ä¸€è¦§</h2>
        <div id="betList">èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAZRvZcA5ARtd0E5tvdn5Z9rOuUCRfw9ww",
            authDomain: "sakai-racing-association.firebaseapp.com",
            projectId: "sakai-racing-association",
            storageBucket: "sakai-racing-association.firebasestorage.app",
            messagingSenderId: "596238260555",
            appId: "1:596238260555:web:df79f88e8c81e6573930ce",
            measurementId: "G-JRJCYSYENL"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ä¿å­˜ã®å‡¦ç†
        document.getElementById('submitBtn').addEventListener('click', async () => {
            const uName = document.getElementById('member').value;
            const rName = document.getElementById('raceName').value;
            
            // 5ã¤ã®åˆ¸ç¨®ã¨ç•ªå·ã‚’å–å¾—
            const t = [1, 2, 3, 4, 5].map(i => document.getElementById(`type${i}`).value);
            const b = [1, 2, 3, 4, 5].map(i => document.getElementById(`bet${i}`).value);

            const bets = [];
            for (let i = 0; i < 5; i++) {
                if (b[i]) bets.push(`${t
