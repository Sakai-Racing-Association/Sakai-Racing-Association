<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ä¿ºãŸã¡ã®ç«¶é¦¬äºˆæƒ³</title>
    <style>
        body { font-family: sans-serif; background: #e8f5e9; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 500px; margin-bottom: 20px; }
        h1, h2 { color: #2e7d32; margin-top: 0; }
        label { font-size: 0.9em; color: #666; }
        input, select, button { margin: 8px 0 16px 0; padding: 12px; width: 100%; box-sizing: border-box; border: 1px solid #ccc; border-radius: 6px; }
        button { background: #2e7d32; color: white; border: none; font-weight: bold; font-size: 1.1em; cursor: pointer; transition: 0.3s; }
        button:hover { background: #1b5e20; }
        .bet-item { border-bottom: 1px solid #eee; padding: 12px 0; }
        .bet-item:last-child { border-bottom: none; }
        .user-name { font-weight: bold; color: #333; }
        .bet-content { color: #d32f2f; font-weight: bold; margin-left: 10px; }
    </style>
</head>
<body>

    <div class="card">
        <h1>ğŸ‡ è²·ã„ç›®ç™»éŒ²</h1>
        <label>ãƒ¡ãƒ³ãƒãƒ¼</label>
        <select id="userName">
            <option>ãƒ¡ãƒ³ãƒãƒ¼A</option><option>ãƒ¡ãƒ³ãƒãƒ¼B</option><option>ãƒ¡ãƒ³ãƒãƒ¼C</option><option>ãƒ¡ãƒ³ãƒãƒ¼D</option><option>ãƒ¡ãƒ³ãƒãƒ¼E</option>
        </select>
        <label>ãƒ¬ãƒ¼ã‚¹å</label>
        <input type="text" id="raceName" placeholder="ä¾‹ï¼šä¸­å±±11R æœ‰é¦¬è¨˜å¿µ">
        <label>è²·ã„ç›®</label>
        <input type="text" id="betContent" placeholder="ä¾‹ï¼š3é€£å˜ 1-2-3">
        <button id="submitBtn">ç™»éŒ²ã™ã‚‹ï¼</button>
    </div>

    <div class="card">
        <h2>ğŸ“Š ã¿ã‚“ãªã®äºˆæƒ³ä¸€è¦§</h2>
        <div id="betList">èª­ã¿è¾¼ã¿ä¸­...</div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // â˜…ã“ã“ã«ã‚ãªãŸã®Firebaseè¨­å®šã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„â˜…
        const firebaseConfig =  {
  apiKey: "AIzaSyAZRvZcA5ARtd0E5tvdn5Z9rOuUCRfw9ww",
  authDomain: "sakai-racing-association.firebaseapp.com",
  projectId: "sakai-racing-association",
  storageBucket: "sakai-racing-association.firebasestorage.app",
  messagingSenderId: "596238260555",
  appId: "1:596238260555:web:df79f88e8c81e6573930ce",
  measurementId: "G-JRJCYSYENL"
};
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // ä¿å­˜ã®å‡¦ç†
        document.getElementById('submitBtn').addEventListener('click', async () => {
            const uName = document.getElementById('userName').value;
            const rName = document.getElementById('raceName').value;
            const bContent = document.getElementById('betContent').value;
            if(!rName || !bContent) return alert("å…¥åŠ›ã—ã¦ãã ã•ã„");

            try {
                await addDoc(collection(db, "bets"), {
                    name: uName, race: rName, bet: bContent, createdAt: serverTimestamp()
                });
                document.getElementById('raceName').value = "";
                document.getElementById('betContent').value = "";
            } catch (e) { alert("ã‚¨ãƒ©ãƒ¼ï¼"); }
        });

        // ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤ºã®å‡¦ç†
        const q = query(collection(db, "bets"), orderBy("createdAt", "desc"));
        onSnapshot(q, (snapshot) => {
            const betList = document.getElementById('betList');
            betList.innerHTML = "";
            snapshot.forEach((doc) => {
                const data = doc.data();
                const div = document.createElement('div');
                div.className = 'bet-item';
                div.innerHTML = `<span class="user-name">${data.name}</span> <small>${data.race}</small><br><span class="bet-content">${data.bet}</span>`;
                betList.appendChild(div);
            });
        });
    </script>
</body>
</html>
